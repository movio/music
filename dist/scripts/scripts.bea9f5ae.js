(function(){"use strict";angular.module("app",["mediaPlayer","ngCookies"]).config(["$httpProvider",function(a){return a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).directive("mvMusic",["$http","$interval","$q","$cookies",function(a,b,c,d){return{restrict:"A",templateUrl:"views/player.html",link:function(c){var e,f,g;return f=function(){return d.queueIp?c.queueIp=d.queueIp:(c.queueIp="http://10.10.0.10:3000",d.queueIp=c.queueIp),d.streamIp?c.streamIp=d.streamIp:(c.streamIp="http://10.10.0.10:8888",d.streamIp=c.streamIp)},c.updateCookies=function(){return d.queueIp=c.queueIp,d.streamIp=c.streamIp},g=b(function(){var b;return b=c.mediaPlayer.network,c.mediaPlayer.playing||"progress"===b||"stalled"===b?void 0:a.jsonp(c.queueIp+"/queue/pop?callback=JSON_CALLBACK").then(function(b){return b.data.data?(console.log("queue data",b.data.data),a.get(c.streamIp+"/info/"+b.data.data)):(console.log("empty data"),null)}).then(function(a){return a?(console.log("stream data: "+a.data.id),c.mediaPlayer.load({src:c.streamIp+"/stream/"+a.data.id,type:"audio/mpeg"},!0)):void 0})},8e3),c.$on("$destroy",function(){return g()}),(e=function(){return f()})()}}}])}).call(this);